# 有效电话号码

!!! info ""
    **难度**：简单  
    **链接**：<https://leetcode-cn.com/problems/valid-phone-numbers>

## 描述

给定一个包含电话号码列表（一行一个电话号码）的文本文件 file.txt，写一个 bash 脚本输出所有有效的电话号码。

你可以假设一个有效的电话号码必须满足以下两种格式： (xxx) xxx-xxxx 或 xxx-xxx-xxxx。（x 表示一个数字）

你也可以假设每行前后没有多余的空格字符。

!!! example "示例"
    **输入**：file.txt
    ```txt
    987-123-4567
    123 456 7890
    (123) 456-7890
    ```
    **输出**：有效的电话号码
    ```txt
    987-123-4567
    (123) 456-7890
    ```

## 题解

### 分析

这是一道简单的正则匹配题，有效号码含两种情况

- xxx-xxx-xxxx
- (xxx) xxx-xxxx

x 为一个数字，单独匹配两种情况

- `^[0-9]{3}-[0-9]{3}-[0-9]{4}$`
- `^\([0-9]{9}\) [0-9]{3}-[0-9]{4}$`

那么要包含两种情况，最简单的方式就是使用`|`连接两个正则表达式

- `^[0-9]{3}-[0-9]{3}-[0-9]{4}$|^\([0-9]{3}\) [0-9]{3}-[0-9]{4}$`

但是显得有点冗长，可以把重复部分提取出来，仅仅对不一致的前半部分进行`|`匹配

- `^([0-9]{3}-|\([0-9]{3}\) )[0-9]{3}-[0-9]{4}$`

!!! warning "转义"
    注意号码信息中的括号`()`需要通过转义符`\`进行转义

### 实现

#### grep

```bash
#!/bin/bash
# Read from the file file.txt and output all valid phone numbers to stdout.

grep -E '^[0-9]{3}-[0-9]{3}-[0-9]{4}$|^\([0-9]{3}\) [0-9]{3}-[0-9]{4}$' file.txt
```

使用合并优化后的正则表达式

```bash
#!/bin/bash
# Read from the file file.txt and output all valid phone numbers to stdout.

grep -E '^([0-9]{3}-|\([0-9]{3}\) )[0-9]{3}-[0-9]{4}$' file.txt
```
